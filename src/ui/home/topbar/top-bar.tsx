import { Badge, Flex } from "antd";
import { DevicesProvider, WithEditor } from "@grapesjs/react";
import {
  Preview,
  CodePreview,
  LoadProject,
  UndoTask,
  RedoTask,
  DiscardButton,
  SaveToast,
} from "@/ui/commands";
import styles from "./topbar.module.css";
const EDITOR_STATUS = "Expermental";

export function Topbar() {
  return (
    <Flex
      align="center"
      justify="space-between"
      style={{
        padding: "0.5rem 4rem",
        background: "#2B2B33",
      }}
    >
      <Flex>
        <a href="/" target="_self" aria-label="homepage">
          <svg
            width="125"
            height="18"
            viewBox="0 0 125 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M-0.00923289 0.909091H3.90909L7.23295 9.0142H7.38636L10.7102 0.909091H14.6286V14H11.5476V5.95881H11.4389L8.29403 13.9169H6.32528L3.1804 5.91406H3.07173V14H-0.00923289V0.909091ZM15.5167 11.8267V9.35938L20.8797 0.909091H23.0721V4.25852H21.8001L18.6616 9.23153V9.33381H26.4279V11.8267H15.5167ZM21.8385 14V11.0724L21.9024 9.99219V0.909091H24.8619V14H21.8385ZM29.1235 17.6818C28.7485 17.6818 28.3948 17.652 28.0624 17.5923C27.73 17.5369 27.4445 17.4624 27.2059 17.3686L27.8962 15.0994C28.203 15.2017 28.48 15.2614 28.7272 15.2784C28.9786 15.2955 29.1938 15.255 29.3728 15.157C29.556 15.0632 29.6966 14.8949 29.7946 14.652L29.9161 14.358L26.426 4.18182H29.6988L31.5077 11.1875H31.61L33.4445 4.18182H36.7364L33.0354 14.9396C32.8564 15.4766 32.6029 15.9496 32.2748 16.3587C31.9509 16.772 31.5311 17.0959 31.0155 17.3303C30.5042 17.5646 29.8735 17.6818 29.1235 17.6818ZM41.3016 14.1854C40.2703 14.1854 39.384 13.9744 38.6425 13.5526C37.9053 13.1264 37.3364 12.5341 36.9358 11.7756C36.5395 11.0128 36.3414 10.1286 36.3414 9.12287C36.3414 8.11293 36.5395 7.22869 36.9358 6.47017C37.3364 5.70739 37.9053 5.11506 38.6425 4.69318C39.384 4.26705 40.2703 4.05398 41.3016 4.05398C42.3328 4.05398 43.2171 4.26705 43.9543 4.69318C44.6958 5.11506 45.2647 5.70739 45.661 6.47017C46.0615 7.22869 46.2618 8.11293 46.2618 9.12287C46.2618 10.1286 46.0615 11.0128 45.661 11.7756C45.2647 12.5341 44.6958 13.1264 43.9543 13.5526C43.2171 13.9744 42.3328 14.1854 41.3016 14.1854ZM41.3208 11.8267C41.6958 11.8267 42.0132 11.7116 42.2732 11.4815C42.5331 11.2514 42.7313 10.9318 42.8676 10.5227C43.0083 10.1136 43.0786 9.64062 43.0786 9.10369C43.0786 8.55824 43.0083 8.08097 42.8676 7.67188C42.7313 7.26278 42.5331 6.94318 42.2732 6.71307C42.0132 6.48295 41.6958 6.3679 41.3208 6.3679C40.933 6.3679 40.6049 6.48295 40.3364 6.71307C40.0722 6.94318 39.8698 7.26278 39.7292 7.67188C39.5928 8.08097 39.5246 8.55824 39.5246 9.10369C39.5246 9.64062 39.5928 10.1136 39.7292 10.5227C39.8698 10.9318 40.0722 11.2514 40.3364 11.4815C40.6049 11.7116 40.933 11.8267 41.3208 11.8267ZM53.2976 9.76207V4.18182H56.4169V14H53.4382V12.1719H53.3359C53.1186 12.7727 52.7478 13.25 52.2237 13.6037C51.7038 13.9531 51.0753 14.1278 50.338 14.1278C49.669 14.1278 49.0809 13.9744 48.5738 13.6676C48.0667 13.3608 47.6726 12.9325 47.3913 12.3828C47.1101 11.8288 46.9673 11.1811 46.963 10.4396V4.18182H50.0887V9.82599C50.093 10.3587 50.2336 10.7784 50.5106 11.0852C50.7876 11.392 51.1647 11.5455 51.642 11.5455C51.9531 11.5455 52.2322 11.4773 52.4794 11.3409C52.7308 11.2003 52.9289 10.9979 53.0738 10.7337C53.223 10.4652 53.2976 10.1413 53.2976 9.76207ZM57.5064 14V4.18182H60.5426V5.97159H60.6449C60.8239 5.32386 61.1158 4.84233 61.5206 4.52699C61.9254 4.20739 62.3963 4.04759 62.9332 4.04759C63.0781 4.04759 63.2273 4.05824 63.3807 4.07955C63.5341 4.09659 63.6768 4.12429 63.8089 4.16264V6.87926C63.6598 6.82812 63.4638 6.78764 63.2209 6.75781C62.9822 6.72798 62.7692 6.71307 62.5817 6.71307C62.2109 6.71307 61.8764 6.79616 61.5781 6.96236C61.2841 7.12429 61.0518 7.35227 60.8814 7.64631C60.7152 7.93608 60.6321 8.27699 60.6321 8.66903V14H57.5064ZM72.7543 7.17969L69.8843 7.25639C69.8544 7.05185 69.7735 6.87074 69.6414 6.71307C69.5093 6.55114 69.3367 6.42543 69.1236 6.33594C68.9148 6.24219 68.6719 6.19531 68.3949 6.19531C68.0327 6.19531 67.7238 6.26776 67.4681 6.41264C67.2167 6.55753 67.0931 6.75355 67.0973 7.00071C67.0931 7.19247 67.1698 7.35866 67.3274 7.49929C67.4894 7.63991 67.777 7.75284 68.1904 7.83807L70.0824 8.19602C71.0625 8.38352 71.7912 8.6946 72.2685 9.12926C72.75 9.56392 72.9929 10.1392 72.9972 10.8551C72.9929 11.5284 72.7926 12.1143 72.3963 12.6129C72.0043 13.1115 71.4674 13.4993 70.7855 13.7763C70.1037 14.049 69.3239 14.1854 68.4461 14.1854C67.0441 14.1854 65.9382 13.8977 65.1286 13.3224C64.3232 12.7429 63.863 11.9673 63.7479 10.9957L66.8353 10.919C66.9034 11.277 67.0803 11.5497 67.3658 11.7372C67.6513 11.9247 68.0157 12.0185 68.4588 12.0185C68.8594 12.0185 69.1854 11.9439 69.4368 11.7947C69.6882 11.6456 69.8161 11.4474 69.8203 11.2003C69.8161 10.9787 69.7181 10.8018 69.5263 10.6697C69.3346 10.5334 69.0341 10.4268 68.625 10.3501L66.912 10.0241C65.9276 9.84517 65.1946 9.51491 64.7131 9.03338C64.2316 8.54759 63.9929 7.92969 63.9972 7.17969C63.9929 6.52344 64.1676 5.96307 64.5213 5.49858C64.875 5.02983 65.3779 4.67188 66.0299 4.42472C66.6819 4.17756 67.451 4.05398 68.3374 4.05398C69.6669 4.05398 70.7152 4.3331 71.4823 4.89134C72.2493 5.44531 72.6733 6.2081 72.7543 7.17969ZM76.6033 14V0.909091H85.7311V3.47869H79.7673V6.16335H85.2645V8.73935H79.7673V11.4304H85.7311V14H76.6033ZM90.3986 14.1406C89.6741 14.1406 89.0158 13.9531 88.4234 13.5781C87.8311 13.2031 87.3581 12.6406 87.0044 11.8906C86.6507 11.1406 86.4739 10.2095 86.4739 9.0973C86.4739 7.94247 86.6571 6.99219 87.0236 6.24645C87.3901 5.50071 87.8695 4.94886 88.4618 4.59091C89.0584 4.23295 89.6997 4.05398 90.3858 4.05398C90.9014 4.05398 91.3425 4.14347 91.709 4.32244C92.0754 4.49716 92.378 4.72301 92.6166 5C92.8553 5.27699 93.0364 5.56463 93.1599 5.86293H93.2239V0.909091H96.3496V14H93.2558V12.4084H93.1599C93.0278 12.7109 92.8403 12.9943 92.5974 13.2585C92.3545 13.5227 92.0499 13.7358 91.6834 13.8977C91.3212 14.0597 90.8929 14.1406 90.3986 14.1406ZM91.4852 11.7053C91.8645 11.7053 92.1884 11.5987 92.4568 11.3857C92.7253 11.1683 92.932 10.8636 93.0768 10.4716C93.2217 10.0795 93.2942 9.61932 93.2942 9.09091C93.2942 8.55398 93.2217 8.09162 93.0768 7.70384C92.9362 7.31605 92.7295 7.01776 92.4568 6.80895C92.1884 6.60014 91.8645 6.49574 91.4852 6.49574C91.0974 6.49574 90.7693 6.60227 90.5009 6.81534C90.2324 7.02841 90.0278 7.32883 89.8872 7.71662C89.7509 8.1044 89.6827 8.5625 89.6827 9.09091C89.6827 9.61932 89.753 10.0795 89.8936 10.4716C90.0342 10.8636 90.2366 11.1683 90.5009 11.3857C90.7693 11.5987 91.0974 11.7053 91.4852 11.7053ZM97.4263 14V4.18182H100.552V14H97.4263ZM98.9924 3.03764C98.5534 3.03764 98.1763 2.89276 97.861 2.60298C97.5456 2.30895 97.388 1.95526 97.388 1.5419C97.388 1.13281 97.5456 0.78338 97.861 0.493608C98.1763 0.199573 98.5534 0.052556 98.9924 0.052556C99.4355 0.052556 99.8127 0.199573 100.124 0.493608C100.439 0.78338 100.597 1.13281 100.597 1.5419C100.597 1.95526 100.439 2.30895 100.124 2.60298C99.8127 2.89276 99.4355 3.03764 98.9924 3.03764ZM107.183 4.18182V6.48295H100.99V4.18182H107.183ZM102.287 1.82955H105.413V10.9126C105.413 11.1044 105.443 11.2599 105.502 11.3793C105.566 11.4943 105.658 11.5774 105.777 11.6286C105.897 11.6754 106.039 11.6989 106.205 11.6989C106.325 11.6989 106.45 11.6882 106.583 11.6669C106.719 11.6413 106.821 11.62 106.889 11.603L107.362 13.8594C107.213 13.902 107.002 13.9553 106.73 14.0192C106.461 14.0831 106.139 14.1236 105.764 14.1406C105.031 14.1747 104.403 14.0895 103.879 13.8849C103.359 13.6761 102.96 13.3523 102.683 12.9134C102.411 12.4744 102.279 11.9226 102.287 11.2578V1.82955ZM112.356 14.1854C111.325 14.1854 110.438 13.9744 109.697 13.5526C108.96 13.1264 108.391 12.5341 107.99 11.7756C107.594 11.0128 107.396 10.1286 107.396 9.12287C107.396 8.11293 107.594 7.22869 107.99 6.47017C108.391 5.70739 108.96 5.11506 109.697 4.69318C110.438 4.26705 111.325 4.05398 112.356 4.05398C113.387 4.05398 114.271 4.26705 115.009 4.69318C115.75 5.11506 116.319 5.70739 116.715 6.47017C117.116 7.22869 117.316 8.11293 117.316 9.12287C117.316 10.1286 117.116 11.0128 116.715 11.7756C116.319 12.5341 115.75 13.1264 115.009 13.5526C114.271 13.9744 113.387 14.1854 112.356 14.1854ZM112.375 11.8267C112.75 11.8267 113.068 11.7116 113.327 11.4815C113.587 11.2514 113.786 10.9318 113.922 10.5227C114.063 10.1136 114.133 9.64062 114.133 9.10369C114.133 8.55824 114.063 8.08097 113.922 7.67188C113.786 7.26278 113.587 6.94318 113.327 6.71307C113.068 6.48295 112.75 6.3679 112.375 6.3679C111.987 6.3679 111.659 6.48295 111.391 6.71307C111.126 6.94318 110.924 7.26278 110.783 7.67188C110.647 8.08097 110.579 8.55824 110.579 9.10369C110.579 9.64062 110.647 10.1136 110.783 10.5227C110.924 10.9318 111.126 11.2514 111.391 11.4815C111.659 11.7116 111.987 11.8267 112.375 11.8267ZM118.017 14V4.18182H121.054V5.97159H121.156C121.335 5.32386 121.627 4.84233 122.032 4.52699C122.436 4.20739 122.907 4.04759 123.444 4.04759C123.589 4.04759 123.738 4.05824 123.892 4.07955C124.045 4.09659 124.188 4.12429 124.32 4.16264V6.87926C124.171 6.82812 123.975 6.78764 123.732 6.75781C123.493 6.72798 123.28 6.71307 123.093 6.71307C122.722 6.71307 122.387 6.79616 122.089 6.96236C121.795 7.12429 121.563 7.35227 121.392 7.64631C121.226 7.93608 121.143 8.27699 121.143 8.66903V14H118.017Z"
              fill="white"
            />
          </svg>
        </a>

        <Badge
          count={<p className={styles.experimentalBadge}>{EDITOR_STATUS}</p>}
          style={{ color: "#000" }}
        />
      </Flex>

      <Flex align="center" gap={8}>
        <DevicesProvider>
          {({ selected, select }) => (
            <div>
              {selected === "desktop" ? (
                <i
                  className="fa-solid fa-mobile-screen"
                  onClick={() => select("mobilePortrait")}
                  style={{ color: "white", cursor: "pointer" }}
                />
              ) : (
                <i
                  className="fa-solid fa-desktop"
                  onClick={() => select("desktop")}
                  style={{ color: "white", cursor: "pointer" }}
                />
              )}
            </div>
          )}
        </DevicesProvider>
      </Flex>

      <Flex gap="middle" align="center">
        <WithEditor>
          <Flex>
            <UndoTask />
            <RedoTask />
          </Flex>

          <LoadProject />
          <CodePreview />
          <Preview />
          <DiscardButton />
          <SaveToast />
        </WithEditor>
      </Flex>
    </Flex>
  );
}
